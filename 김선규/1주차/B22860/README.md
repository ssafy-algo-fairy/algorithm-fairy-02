# 📁 BOJ 22860 - 폴더 정리 (small)

- 🔗 문제 링크: https://www.acmicpc.net/problem/22860
- 🏷️ 분류: 자료구조(HashMap), 트리/그래프 구성, DFS(재귀), 누적 카운팅

---

## 📌 문제 요약
폴더/파일 구조가 주어진다.

- 입력으로 `(상위 폴더 P, 하위 이름 F, 타입 C)`가 주어짐  
  - `C = 1` → F는 **폴더**
  - `C = 0` → F는 **파일**
- 이후 `Q`개의 경로 쿼리가 주어질 때, 해당 폴더(하위 전체 포함)에 존재하는
  - **파일 종류 개수**
  - **파일 총 개수**
  를 출력한다.

---

## ❗ 시행착오
처음에는 예시처럼 **항상 부모 폴더가 먼저 입력에 등장한다**고 가정하고 풀었다가 틀렸다.  
실제로는 입력에서 **부모 폴더가 나중에 등장하는 경우도** 있을 수 있다.

➡️ 이 문제를 해결하기 위해, 폴더/파일 이름을 **HashMap으로 ID를 부여**해
“아직 등장하지 않은 이름”이 나와도 **즉시 ID를 생성**해서 연결할 수 있게 만들었다.

---

## 💡 풀이 아이디어
1) 폴더/파일 이름을 각각 정수 ID로 매핑한다.
- `folderIdx: HashMap<String, Integer>`  
- `fileIdx: HashMap<String, Integer>`

2) 폴더 트리를 인접 리스트로 구성한다.
- `goTo[parentFolderId]`에 자식 이름(String)을 저장 (폴더/파일 모두)

3) DFS를 돌면서, 각 폴더가 포함하는 파일 카운트를 누적한다.
- `fileCnt[folderId][fileTypeId]` = 해당 폴더(하위 포함)에 존재하는 파일 개수

4) 쿼리마다 `fileCnt`를 보고
- `0이 아닌 파일 타입 수` = 파일 종류 개수
- 전체 합 = 파일 총 개수
를 출력한다.

---

## ✅ 사용한 자료구조
- `ArrayList<String> folderList`, `fileList`
  - ID → 이름 역매핑 용도
- `HashMap<String, Integer> folderIdx`, `fileIdx`
  - 이름 → ID 빠른 매핑 (부모가 나중에 나오는 케이스 해결)
- `ArrayList<String>[] goTo`
  - 폴더 트리(부모 → 자식) 구조 저장
- `int[][] fileCnt`
  - 폴더별(행) × 파일종류별(열) 누적 개수
- `int[] folderIn`
  - DFS 중 현재 경로에 포함된 폴더 표시(조상 폴더들에 파일을 누적하기 위해 사용)

---

## 🧠 핵심 구현 포인트
### 1) 부모가 먼저 안 나와도 되는 이유: `getFolderId()`
입력에서 P(부모 폴더)가 처음 등장했는데 아직 등록이 안 되어 있어도,
`getFolderId(P)`가 즉시 새로운 ID를 부여한다.

- 덕분에 “부모 → 자식 연결”을 입력 순서에 상관없이 구성 가능

---

### 2) DFS로 하위 파일을 상위 폴더까지 누적
`searchFile(cur)`에서:
- `folderIn[cur] = 1`로 현재 경로(조상 포함)를 표시
- 자식이 폴더면 재귀
- 자식이 파일이면 현재 경로에 있는 모든 폴더(`folderIn[i]==1`)에 대해
  `fileCnt[i][fileType]++`를 수행

즉, 파일 1개를 발견할 때마다 **그 파일이 속한 모든 조상 폴더의 카운트가 증가**한다.

---

## 🔎 쿼리 처리
쿼리 경로 문자열 `"main/.../X"`를 `/`로 split 후,
마지막 폴더 이름의 ID를 찾아 `fileCnt` 행을 확인한다.

- 파일 종류 개수: `fileCnt[folder][j] != 0` 인 j의 개수
- 파일 총 개수: `sum(fileCnt[folder][j])`

출력: `종류개수 총개수`

---

## ⏱️ 복잡도 (현재 코드 기준)
- DFS에서 파일을 만날 때마다 “현재 경로의 조상 폴더”에 누적 → 최악에는 비용이 커질 수 있음
- `folderList.contains`, `folderList.indexOf`, `fileList.indexOf`가 선형 탐색이라 추가 비용 발생

그래도 (small) 조건에서는 통과 가능한 방식으로 작성했다.

---

## 📝 개선 아이디어(선택)
- `goTo`에 String 대신 `(자식ID, 타입)`을 저장하면
  `contains/indexOf` 선형 탐색을 제거할 수 있다.
- “각 폴더가 가진 파일 멀티셋”을 자식에서 부모로 합치는 형태(서브트리 DP)로 바꾸면
  더 정석적으로 누적 가능하다.

---
