# BOJ 21276 - 계보 복원

## 📌 문제 개요
이 문제는 사람들 간의 부모-자식 관계가 주어졌을 때,  
전체 가계도를 복원하는 문제이다.

주어진 정보는 직접적인 부모 관계뿐만 아니라  
조상 관계가 포함되어 있을 수 있기 때문에  
올바른 계층 구조를 복원하는 과정이 필요하다.

---

## 🧠 핵심 개념

### 1️⃣ 위상 정렬 (Topological Sort)

이번 문제를 통해 위상 정렬을 새롭게 학습하였다.

위상 정렬은 **방향 그래프에서 선후 관계가 존재할 때,  
순서를 올바르게 정렬하는 알고리즘**이다.

특히 다음과 같은 특징을 가진다.

- 방향 그래프(DAG)에서만 가능
- 진입 차수(indegree)를 활용
- 큐를 이용해 차수가 0인 노드부터 처리

이번 문제에서는

- 부모 → 자식 방향으로 간선을 구성
- 진입 차수가 0인 사람을 "시조"로 판단
- 위상 정렬 과정 중 직접적인 자식 관계만 기록

하는 방식으로 해결하였다.

---

## 🏗 자료구조 설계

- `graph`  
  부모 → 자식 관계를 저장하는 인접 리스트

- `indegree`  
  각 사람의 진입 차수 관리

- `child`  
  실제 직계 자식만 저장하기 위한 구조

- `PriorityQueue`  
  이름을 사전순으로 출력하기 위해 사용

---

## 🔄 해결 과정

1. 모든 사람을 그래프에 초기화
2. 부모-자식 관계 입력받아 그래프 구성
3. 진입 차수 0인 사람을 찾아 시조로 분류
4. 위상 정렬 수행
5. indegree가 0이 되는 순간의 관계만 직계 자식으로 저장
6. 사전순으로 결과 출력

---

## 💡 배운 점

- 02/19에 진행된 SW 역량 테스트에서도 위상정렬 문제가 나왔는데 n이 작고 단순해서 위상정렬을 사용하지 않고 풀었다. 하지만 이번 문제를 풀면서 위상정렬의 필요성을 느끼게 되었고 위상정렬을 학습하는 계기가 되었다.
- 진입 차수를 감소시키는 시점이 매우 중요하다는 것을 배웠다.
- `HashMap + HashSet` 구조를 이용하면  
  문자열 기반 그래프도 효율적으로 관리할 수 있다.
- 출력 정렬을 위해 `PriorityQueue`를 적절히 활용하는 방법을 익혔다.

---

## 🚀 정리

이번 문제는 단순 구현이 아니라  
그래프 이론과 위상 정렬 개념을 정확히 이해해야 풀 수 있는 문제였다.

특히,

> "진입 차수가 0이 되는 순간이 바로 직접적인 부모 관계가 확정되는 시점"

이라는 점이 핵심 포인트였다.

위상 정렬을 실전 문제에 적용해 보면서  
개념이 훨씬 명확해진 좋은 학습 경험이었다.