## π© λ¬Έμ  μ”μ•½

* $N$κ°μ κµ¬μ—­μ΄ μ›ν•μΌλ΅ μ—°κ²°λμ–΄ μμΌλ©°, κ° κµ¬μ—­μ€ λ…μ†(1)μ΄κ±°λ‚ μΌλ° κµ¬μ—­(0)
1. **Type 1**: νΉμ • κµ¬μ—­μ λ…μ† μ—¬λ¶€λ¥Ό λ°μ „
2. **Type 2**: ν„μ¬ μ„μΉλ¥Ό μ‹κ³„ λ°©ν–¥μΌλ΅ λ§νΌ μ΄λ™μ‹ν‚΄
3. **Type 3**: ν„μ¬ μ„μΉμ—μ„ μ‹κ³„ λ°©ν–¥μΌλ΅ κ°€μ¥ κ°€κΉμ΄ λ…μ†κΉμ§€μ κ±°λ¦¬λ¥Ό κµ¬ν•¨

## π› οΈ μ£Όμ” κµ¬ν„ μ”μ†

### 1. μ›ν• μ²λ¦¬ (Circular Indexing)

κµ¬μ—­μ΄ 1λ²λ¶€ν„° $N$λ²κΉμ§€ μμ„ λ•, $N$λ²μ„ λ„μ–΄ λ‹¤μ‹ 1λ²μΌλ΅ λμ•„μ™€μ•Όν•¨

* **κ³µμ‹**: `(ν„μ¬_μ„μΉ + μ΄λ™_κ±°λ¦¬ - 1) % N + 1`
* `-1`μ„ ν•΄μ£Όλ” μ΄μ : μλ°”μ `%` μ—°μ‚°μ€ `0 ~ N-1` λ²”μ„λ¥Ό λ°ν™ν•λ―€λ΅, 1-based μΈλ±μ¤λ¥Ό 0-basedλ΅ μ μ‹ λ³€ν™ν•μ—¬ κ³„μ‚°ν• λ’¤ λ‹¤μ‹ `+1`μ„ ν•΄μ¤€λ‹¤.

```java
    if(type == 1){
        // n λ² κµ¬μ—­μ΄ λ…μ† x -> λ…μ†, λ…μ† -> λ…μ† x
        if(A.contains(n)) A.remove(n);
        else A.add(n);

    } else if(type == 2){
        // μ‹κ³„ λ°©ν–¥μΌλ΅ n λ§νΌ μ΄λ™
        p = (p + n - 1) % N + 1; // μ›ν• μ²λ¦¬!
    }
```

### 2. μΏΌλ¦¬ κµ¬ν„

* **Type 1**: `isSelected[n]` λ°°μ—΄μ΄λ‚ `Set` μλ£κµ¬μ΅°λ¥Ό μ‚¬μ©ν•μ—¬ μƒνƒλ¥Ό κ΄€λ¦¬ν•λ‹¤.
* **Type 2**: ν¬μΈν„° λ³€μ(`p`)λ¥Ό μ—…λ°μ΄νΈν•μ—¬ λ„ν„μ΄μ ν„μ¬ μ„μΉλ¥Ό μ μ§€ν•λ‹¤.
* **Type 3**: ν„μ¬ μ„μΉ `p`λ¥Ό κΈ°μ¤€μΌλ΅ 'λ‚λ³΄λ‹¤ ν¬κ±°λ‚ κ°™μ€' μ„μΉ μ¤‘ κ°€μ¥ μ‘μ€ κ°’μ„ μ°Ύκ³ , μ—†μΌλ©΄ λ°°μ—΄μ 'λ§¨ μ•'μΌλ΅ λμ•„κ°€μ„ μ°Ύλ”λ‹¤.


## β³ μ‹κ°„ μ΄κ³Όκ°€ λ‚¬λ μ΄μ 

* **μ›μΈ**: Type 3μ—μ„ λ…μ†λ¥Ό μ°ΎκΈ° μ„ν•΄ λ°λ³µλ¬Έμ„ μ‚¬μ©ν–κΈ° λ•λ¬Έ
* **λ³µμ΅λ„**: μΏΌλ¦¬λ§λ‹¤ μµμ•…μ κ²½μ° λ²μ νƒμƒ‰μ΄ ν•„μ”ν•μ—¬ μ „μ²΄ μ‹κ°„ λ³µμ΅λ„κ°€ $O(N \times Q)$
* $N$κ³Ό $Q$κ°€ 10λ§μΌ κ²½μ° μ•½ 100μ–µ λ²μ μ—°μ‚°μ΄ λ°μƒν•μ—¬, μΌλ°μ μΈ μ‹κ°„ μ ν•(1~2μ΄)μ„ μ΄κ³Όν•κ² λλ‹¤.

![alt text](image.png)

## π³ TreeSetμ„ μ‚¬μ©ν•λ” μ΄μ 

* **μ΄μ§„ νƒμƒ‰ νΈλ¦¬ κΈ°λ°**: `TreeSet`μ€ λ°μ΄ν„°λ¥Ό μ •λ ¬λ μƒνƒλ΅ μ μ§€ν•λ©°, μ›ν•λ” κ°’μ„ μ°Ύλ” λ° $O(\log N)$μ μ‹κ°„μ΄ κ±Έλ¦°λ‹¤.
* **νƒμƒ‰ ν¨μ¨μ„±**: 10λ§ κ°μ λ°μ΄ν„°λ¥Ό 10λ§ λ² μΌμΌμ΄ ν™•μΈν•λ” λ€μ‹ , μ•½ 17λ²()μ λΉ„κµλ§μΌλ΅ λ‹¤μ λ…μ†λ¥Ό μ°Ύμ•„λ‚Ό μ μλ‹¤.
* **μ „μ²΄ λ³µμ΅λ„**: $O(Q \log N)$μΌλ΅ νκΈ°μ μΌλ΅ μ¤„μ–΄λ“¤μ–΄ μ‹κ°„ λ‚΄μ— ν†µκ³Όκ°€ κ°€λ¥


## π’΅ TreeSetμ„ μ‚¬μ©ν•λ” κ²½μ°

1. λ°μ΄ν„°κ°€ **μ •λ ¬λ μƒνƒ**λ΅ μ μ§€λμ–΄μ•Ό ν•  λ•.
2. νΉμ • κ°’λ³΄λ‹¤ **ν¬κ±°λ‚ κ°™μ€(λλ” μ‘μ€) κ°’**μ„ λΉ λ¥΄κ² μ°Ύμ•„μ•Ό ν•  λ• (`ceiling`, `floor`).
3. λ°μ΄ν„°μ **μ¶”κ°€μ™€ μ‚­μ **κ°€ λΉλ²ν•κ² μΌμ–΄λ‚λ©΄μ„λ„ μ •λ ¬ μƒνƒλ¥Ό μ μ§€ν•΄μ•Ό ν•  λ•.

```java
if(A.isEmpty()) {
    sb.append("-1\n");
} else {
    // ν„μ¬ μ„μΉ p λ³΄λ‹¤ ν¬κ±°λ‚ κ°™μ€ μ²« λ²μ§Έ λ…μ† μ°ΎκΈ°
    Integer target = A.ceiling(p);

    if(target != null){
        sb.append(target - p).append('\n');
    } else {
        // ν„μ¬ μ„μΉ λ’¤μ—λ” μ—†κ³ , ν• λ°”ν€΄ λμ•„ λ§¨ μ•μ— μλ” κ²½μ°
        // (N - ν„μ¬ μ„μΉ) + λ§¨ μ• λ…μ† μ„μΉ
        sb.append((N - p) + A.first()).append("\n");
    }
}

```


## π” TreeSet μ£Όμ” λ©”μ„λ“

| λ©”μ„λ“ | μ„¤λ… |
| --- | --- |
| **`add(E e)`** | μ”μ†λ¥Ό μ¶”κ°€ν•λ©° μλ™μΌλ΅ μ •λ ¬ μƒνƒλ¥Ό μ μ§€ |
| **`remove(Object o)`** | νΉμ • μ”μ†λ¥Ό μ‚­μ  |
| **`first()`** | ν„μ¬ μ •λ ¬λ μ”μ† μ¤‘ **κ°€μ¥ μ‘μ€ κ°’**μ„ λ°ν™ |
| **`last()`** | ν„μ¬ μ •λ ¬λ μ”μ† μ¤‘ **κ°€μ¥ ν° κ°’**μ„ λ°ν™ |
| **`ceiling(E e)`** | μ κ³µλ κ°’λ³΄λ‹¤ **ν¬κ±°λ‚ κ°™μ€ κ°’** μ¤‘ κ°€μ¥ μ‘μ€ κ°’μ„ λ°ν™ (μ—†μΌλ©΄ `null`) |
| **`floor(E e)`** | μ κ³µλ κ°’λ³΄λ‹¤ **μ‘κ±°λ‚ κ°™μ€ κ°’** μ¤‘ κ°€μ¥ ν° κ°’μ„ λ°ν™ (μ—†μΌλ©΄ `null`) |
| **`isEmpty()`** | λΉ„μ–΄μλ”μ§€ ν™•μΈ (λ…μ†κ°€ ν•λ‚λ„ μ—†λ” κ²½μ° μ²λ¦¬μ©) |

## β­ μμ•„μ„±μ°°

μ¤λλ§ λ‘ λ²μ΄λ‚ μ΅°κ±΄μ„ λ¨Όμ € ν™•μΈν•κ³  ν’€μ΄λ¥Ό μƒκ°ν•λΌλ” μ†λ¦¬λ¥Ό λ“¤μ—λ‹¤!!! λ¬΄μ‘μ • κµ¬ν„ν•κ³  μ• λλ©΄ μμ •ν•λ” μ£Όλ¨Ήκµ¬κµ¬~ μ•κ³ λ¦¬μ¦ ν’€μ΄λ§ ν•λ‹¤κ°€ (μ™λƒλ©΄ λ³µμ΅λ„ λ©”λ¨λ¦¬ μƒκ°ν•΄μ•Ό ν•λ” μ–΄λ ¤μ΄ λ¬Έμ λ¥Ό μ• ν’€μ–΄λ΄¤κΈ° λ•λ¬Έμ—) μ΄μ λ” μ§„μ§ μ‚¬μ „μ— μ΅°κ±΄μ„ λ¨Όμ € λ”°μ Έλ΄μ•Όκ² λ‹¤κ³  μƒκ°ν–λ‹¤.